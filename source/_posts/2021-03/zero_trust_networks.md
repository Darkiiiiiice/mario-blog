---
title: Zero Trust Networks
date: '2021-03-06 20:00:00'
category: Networks
author: MarioMang
cover: /resources/images/default_cover.gif
updated: '2021-03-06 20:00:00'
---

## 零信任网络

### 基本概念

零信任模型旨在解决"基于网络边界建立信任"这种理念本身固有的问题. 零信任模型没有基于网络位置建立信任, 而是在不依赖网络传输层物理安全机制的前提下, 有效的保护网络通信和业务访问. 

零信任网络的概念建立在以下5个基本假定之上

* 网络无时无刻不出与危险的环境中
* 网络中自始至终存在外部或内部威胁
* 网络的位置不足以据诶都能够网络的可信度
* 所有的设备, 用户和网络流量都应当经过认证和授权
* 安全策略必须是动态的, 并基于尽可能多的数据源计算而来

传统的网络安全结构把不同的网络划分为不同的区域, 不同的区域之间使用防火墙进行隔离, 每个区域都被授予某种成都的信任,  它决定了网络资源是否被允许访问. 这种安全模型提供了非常强大的纵深防御模型

传统的安全模型主要有以下缺点

* 缺乏网络内部的流量检查
* 主机部署缺乏物理及逻辑上的灵活性
* 存在单点故障

#### 零信任的控制平面

零信任架构的支撑系统称为控制平面, 其他部分称为数据平面, 数据平面由控制平面指挥和配置. 访问受保护资源的请求首先经过控制平面, 包括设备和用户的身份认证与授权.
细粒度的控制策略也在这一层进行, 控制平面可以基于组织中的角色, 时间或设备类型进行授权. 
一旦控制平面完成检查, 确定该请求具备合法的授权, 它就会动态配置数据平面, 接收来自该客户端(且尽显该客户端)的访问流量.

#### 边界安全模型的演进

传统安全架构的基本思想是通过构建层层防线来保护网络中的敏感资源. 入侵者必须穿透这些防线, 才能够访问敏感资源.

现代边界安全模型通过在内部网络和互联网之间部署防火墙/NAT设备, 划分内部的安全区, 隔离区和不可信区域

#### 零信任

信任级别定义了所选全协议强度的下限, 但事实上, 安全协议强度超出需求的情况是很少见的, 因此尽可能减少信任是更明智的做法

零信任, 就是一个完全不可信的网络. 零信任模型认为, 主机无论处于网络的什么位置, 都应当被视为互联网主机
他们所在的网络, 无论是互联网还是内部网络, 都必须被视为充满威胁的危险网络. 只有认识到这一点, 才能建立安全通信

#### 边界安全模型与零信任模型的对比

边界安全模型试图在可信资源和不可信资源之间建立一堵墙, 为受保护的内部网络赋予了一定级别的信任, 这种做法违背了零信任模型的基本原则
可信区域内部的主机很少有自我保护的能力, 既然这些主机共享同一个可信区域, 也就意味着内部的主机之间是互相信任的
我们不仅要保护主机免受来自外部的攻击, 还需要保护他们免受相互之间的攻击

零信任模型假定整个网络不可信, 那么就可以假定攻击者可以使用任意IP地址进行通信, 仅使用IP地址或物理位置作为标识符来保护资源是不够的
所有主机, 甚至处于相同可信区域的主机, 都必须提供正确的身份标识

零信任网络有3个关键组件: 用户/应用程序认证, 设备认证和信任

零信任模型需要计算出 信任评分 并将应用程序, 设备和信任评分绑定在一起形成代理, 然后基于代理实施安全策略, 进行访问请求的授权

边界安全模型的根本缺陷是缺乏全局性防护和安全策略强制执行

#### 云环境的应用

在零信任模型中, 计算资源不依赖IP地址或网络的安全性即可进行身份验证和安全通信, 这种能力意味着可以最大程度的把计算资源商品化

### 信任管理

信任管理是零信任网络的一个重要功能

信任委托可以构建自动化系统, 在无需人为干预的情况下, 以安全可信的方式管理大规模增长的零信任网络

#### 威胁模型

定义威胁模型是设计安全架构的第一步, 威胁模型用来描述潜在的攻击者及其能力, 资源以及意图攻击的目标
威胁模型通常会明确攻击者的范围, 并按照攻击者的能力进行排序, 以便于人们按照从易到难的顺序, 合理部署相应的攻击缓解措施

常见的攻击

1. 碰运气攻击者

这类攻击又被称为脚本小子

2. 定向的攻击者

此类攻击者针对特定的目标发起针对性的攻击

3. 内部人员

拥有合法凭据的系统用户

4. 可信内部人员

可信度很高的系统管理员

RFC3552 描述了互联网的威胁模型, 一般情况下, 零信任网络遵循互联网威胁模型来描述安全态势, 规划缓解威胁的措施

#### 强认证

零信任网络中的每个访问请求都需要经过强身份认证

目前, 应用较广泛的身份认证机制是安全工程师们都非常熟悉的X.509标准, 该标准定义了数字证书的标准格式, 并能够通过信任链认证身份. X.509证书是TLS协议用来验证连接的主要机制
X.509证书使用两个密钥: 公钥和密钥. 公钥需要被公布出去, 私钥则被严格保密. 使用公钥加密的数据, 可以用私钥解密, 反之亦然

#### 认证信任

公钥基础设施(PKI)的目标是允许无特权的通信双方通过共同信任的第三方来验证对方身份的真实性, PKI利用注册中心(RA)把通信实体的身份与其公钥进行绑定,然后把这种绑定嵌入数字证书, 并由可信的第三方进行数字签名, 只要通信双方信任同一个第三方, 就可以证明自己的身份

CA是数字证书链的信任锚, 他们签署并公开发布公钥及其绑定的身份信息, 允许无特权实体通过数字签名来验证这种绑定关系的有效性

PKI是零信任模型身份认证的基石, 大多数零信任网络都采用PKI证明身份的真实性

#### 控制平面和数据平面

数据平面的作用是转发网络流量, 它需要告诉处理数据包, 因此其处理逻辑相对简单, 通常是用专用硬件
控制平面可以看作是网络设备的大脑, 系统管理员用它来配置管理网络设备, 因此控制平面会随着策略的变化而变化

零信任网络中数据平面由直接处理网络流量的应用程序, 防火墙, 代理服务器和路由器组成, 数据平面在零信任网络中具有范围很广的访问权限和暴露面, 因此不能使用数据平面上的服务来获取控制平面的特权

控制平面能够影响数据平面的变化, 这种机制非常重要. 因为数据平面通常是攻击者的入口, 所以数据平面于控制平面之间的接口必须非常清晰, 确保数据平面种的系统不会因为被攻陷而导致在网络内部横向移动.

数据平面于控制平面之间的交互请求必须使用私有PKI系统进行身份认证和加密, 以确保接收方可信

# 授权

授权是零信任网络当仁不让的核心机制和流程, 所有网络请求都必须被授权

零信任授权体系架构包括4个核心组件

* 策略执行组件

策略执行组件在逻辑上处于授权信息流的第一道关口, 负责拦截访问请求并通过调用策略引擎完成授权决策
策略执行组件的两大职责, 策略引擎交互完成授权决策, 授权决策结果的强制执行

* 策略引擎

策略引擎是零信任授权模型中进行授权决策的组件, 它接收来自策略执行组件的授权请求, 并和预先指定好的策略进行比较, 决定请求是否被允许, 并将决策结果返回策略执行组件进行强制执行

* 信任引擎

信任引擎是对特定的网络请求或活动进行风险分析的系统组件, 其职责是对网络请求及活动的风险进行数值评估, 策略引擎基于这个风险评估进行进一步的授权决策, 以确定是否允许此次访问请求

* 数据存储系统

  策略引擎进行授权决策时所使用的规则需要被持久化存储, 策略规则让最终被加载到策略引擎模块中
  好处
  1. 策略的变更可持续跟踪
  2. 策略变更的缘由可通过版本控制系统进行跟踪
  3. 策略配置的当前状态可通过实际的策略执行机制进行验证




